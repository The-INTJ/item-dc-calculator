{
  "openapi": "3.1.0",
  "info": {
    "title": "Contest Judging API",
    "version": "2.0.0",
    "description": "API for managing contests, entries, judges, and scoring. Supports multiple contest types through configurable ContestConfig."
  },
  "servers": [
    {
      "url": "/api/contest",
      "description": "Contest API"
    }
  ],
  "components": {
    "securitySchemes": {
      "AdminRole": {
        "type": "apiKey",
        "in": "header",
        "name": "x-contest-role",
        "description": "Set to 'admin' for admin-only endpoints"
      }
    },
    "schemas": {
      "ContestPhase": {
        "type": "string",
        "enum": ["debug", "set", "shake", "scored"],
        "description": "Contest lifecycle state",
        "example": "shake"
      },
      "JudgeRole": {
        "type": "string",
        "enum": ["admin", "judge", "viewer"],
        "example": "judge"
      },
      "AttributeConfig": {
        "type": "object",
        "description": "Configuration for a single scoring attribute",
        "properties": {
          "id": { "type": "string", "description": "Unique identifier (lowercase alphanumeric)", "example": "aroma" },
          "label": { "type": "string", "description": "Display name", "example": "Aroma" },
          "description": { "type": "string", "description": "Helper text for judges", "example": "How appealing is the scent?" },
          "min": { "type": "number", "description": "Minimum score value", "default": 0, "example": 0 },
          "max": { "type": "number", "description": "Maximum score value", "default": 10, "example": 10 }
        },
        "required": ["id", "label"]
      },
      "ContestConfig": {
        "type": "object",
        "description": "Configuration defining the contest type and scoring attributes",
        "properties": {
          "topic": { "type": "string", "description": "Contest type", "example": "Mixology" },
          "entryLabel": { "type": "string", "description": "Singular label for entries", "example": "Drink" },
          "entryLabelPlural": { "type": "string", "description": "Plural label for entries", "example": "Drinks" },
          "attributes": {
            "type": "array",
            "description": "Scoring dimensions",
            "items": { "$ref": "#/components/schemas/AttributeConfig" }
          }
        },
        "required": ["topic", "attributes"]
      },
      "ContestConfigItem": {
        "type": "object",
        "description": "Stored contest configuration with unique ID",
        "properties": {
          "id": { "type": "string", "description": "Unique identifier", "example": "mixology" },
          "topic": { "type": "string", "description": "Contest type", "example": "Mixology" },
          "entryLabel": { "type": "string", "description": "Singular label for entries", "example": "Drink" },
          "entryLabelPlural": { "type": "string", "description": "Plural label for entries", "example": "Drinks" },
          "attributes": {
            "type": "array",
            "description": "Scoring dimensions",
            "items": { "$ref": "#/components/schemas/AttributeConfig" }
          }
        },
        "required": ["id", "topic", "attributes"]
      },
      "ScoreBreakdown": {
        "type": "object",
        "description": "Dynamic score breakdown - keys are attribute IDs from the contest config",
        "additionalProperties": { "type": "number" },
        "example": {
          "aroma": 8,
          "balance": 7,
          "presentation": 9,
          "creativity": 8,
          "overall": 8
        }
      },
      "ScoreLock": {
        "type": "object",
        "properties": {
          "locked": { "type": "boolean", "example": false },
          "expiresAt": { "type": "number", "example": 1704067200000 },
          "token": { "type": "string", "example": "abc123" },
          "updatedAt": { "type": "number", "example": 1704063600000 }
        }
      },
      "Judge": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "judge-1" },
          "displayName": { "type": "string", "example": "Jane Smith" },
          "role": { "$ref": "#/components/schemas/JudgeRole" },
          "contact": { "type": "string", "example": "jane@example.com" }
        },
        "required": ["id", "displayName", "role"]
      },
      "Entry": {
        "type": "object",
        "description": "A contest entry (drink, chili, cosplay, performance, etc.)",
        "properties": {
          "id": { "type": "string", "example": "entry-1" },
          "name": { "type": "string", "example": "Summer Sunset" },
          "slug": { "type": "string", "example": "summer-sunset" },
          "description": { "type": "string", "example": "A refreshing citrus cocktail with a hint of lavender" },
          "round": { "type": "string", "example": "finals" },
          "submittedBy": { "type": "string", "example": "John Doe" },
          "scoreByUser": {
            "type": "object",
            "additionalProperties": { "$ref": "#/components/schemas/ScoreBreakdown" }
          },
          "scoreTotals": { "$ref": "#/components/schemas/ScoreBreakdown" },
          "scoreLock": { "$ref": "#/components/schemas/ScoreLock" }
        },
        "required": ["id", "name", "slug", "description", "round", "submittedBy"]
      },
      "ScoreEntry": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "score-1" },
          "entryId": { "type": "string", "example": "entry-1" },
          "judgeId": { "type": "string", "example": "judge-1" },
          "breakdown": { "$ref": "#/components/schemas/ScoreBreakdown" },
          "notes": { "type": "string", "example": "Excellent balance of flavors" }
        },
        "required": ["id", "entryId", "judgeId", "breakdown"]
      },
      "Contest": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "contest-1" },
          "name": { "type": "string", "example": "Summer Mixoff 2024" },
          "slug": { "type": "string", "example": "summer-mixoff-2024" },
          "phase": { "$ref": "#/components/schemas/ContestPhase" },
          "config": { "$ref": "#/components/schemas/ContestConfig" },
          "location": { "type": "string", "example": "Downtown Bar" },
          "startTime": { "type": "string", "example": "2024-07-15T18:00:00Z" },
          "bracketRound": { "type": "string", "example": "finals" },
          "currentEntryId": { "type": "string", "example": "entry-1" },
          "defaultContest": { "type": "boolean", "example": true },
          "entries": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Entry" }
          },
          "judges": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Judge" }
          },
          "scores": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ScoreEntry" }
          }
        },
        "required": ["id", "name", "slug", "phase", "entries", "judges", "scores"]
      },
      "Error": {
        "type": "object",
        "properties": {
          "message": { "type": "string", "example": "Contest not found" }
        },
        "required": ["message"]
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "example": true }
        }
      }
    }
  },
  "paths": {
    "/current": {
      "get": {
        "summary": "Get default contest",
        "description": "Returns the current/default contest for public display",
        "tags": ["Contests"],
        "responses": {
          "200": {
            "description": "Current contest or null",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "currentContest": {
                      "oneOf": [
                        { "$ref": "#/components/schemas/Contest" },
                        { "type": "null" }
                      ]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/contests": {
      "get": {
        "summary": "List all contests",
        "description": "Returns all contests and the current default contest. Optionally filter by slug.",
        "tags": ["Contests"],
        "security": [{ "AdminRole": [] }],
        "parameters": [
          {
            "name": "slug",
            "in": "query",
            "description": "Filter by contest slug",
            "required": false,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of contests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contests": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Contest" }
                    },
                    "currentContest": {
                      "oneOf": [
                        { "$ref": "#/components/schemas/Contest" },
                        { "type": "null" }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Contest not found (when filtering by slug)",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a contest",
        "description": "Creates a new contest. Use configTemplate for built-in templates or provide a custom config.",
        "tags": ["Contests"],
        "security": [{ "AdminRole": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "slug": { "type": "string" },
                  "phase": { "$ref": "#/components/schemas/ContestPhase" },
                  "location": { "type": "string" },
                  "startTime": { "type": "string" },
                  "defaultContest": { "type": "boolean" },
                  "configTemplate": {
                    "type": "string",
                    "description": "Built-in template key: mixology, chili, cosplay, dance",
                    "enum": ["mixology", "chili", "cosplay", "dance"]
                  },
                  "config": { "$ref": "#/components/schemas/ContestConfig" }
                },
                "required": ["name", "slug"]
              },
              "examples": {
                "withTemplate": {
                  "summary": "Create using built-in template",
                  "value": {
                    "name": "Chili Cook-Off 2024",
                    "slug": "chili-cookoff-2024",
                    "configTemplate": "chili",
                    "location": "Community Center"
                  }
                },
                "withCustomConfig": {
                  "summary": "Create with custom config",
                  "value": {
                    "name": "Photography Contest",
                    "slug": "photo-contest-2024",
                    "config": {
                      "topic": "Photography",
                      "entryLabel": "Photo",
                      "entryLabelPlural": "Photos",
                      "attributes": [
                        { "id": "composition", "label": "Composition" },
                        { "id": "lighting", "label": "Lighting" },
                        { "id": "creativity", "label": "Creativity" },
                        { "id": "overall", "label": "Overall" }
                      ]
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contest created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Contest" }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/contests/{id}": {
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "description": "Contest ID or slug",
          "schema": { "type": "string" }
        }
      ],
      "get": {
        "summary": "Get a contest",
        "description": "Returns a single contest by ID or slug. Currently no admin requirement.",
        "tags": ["Contests"],
        "responses": {
          "200": {
            "description": "Contest details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Contest" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Contest not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update a contest",
        "description": "Updates an existing contest. Currently no admin requirement.",
        "tags": ["Contests"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "slug": { "type": "string" },
                  "phase": { "$ref": "#/components/schemas/ContestPhase" },
                  "location": { "type": "string" },
                  "startTime": { "type": "string" },
                  "currentEntryId": { "type": "string" },
                  "defaultContest": { "type": "boolean" },
                  "config": { "$ref": "#/components/schemas/ContestConfig" }
                }
              },
              "example": {
                "phase": "shake",
                "currentEntryId": "entry-2"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contest updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Contest" }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Contest not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a contest",
        "description": "Deletes a contest by ID. Currently no admin requirement.",
        "tags": ["Contests"],
        "responses": {
          "200": {
            "description": "Contest deleted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Contest not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/contests/{id}/entries": {
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "description": "Contest ID",
          "schema": { "type": "string" }
        }
      ],
      "get": {
        "summary": "List entries in a contest",
        "description": "Returns all entries for a contest. Currently no admin requirement.",
        "tags": ["Entries"],
        "responses": {
          "200": {
            "description": "List of entries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Entry" }
                }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Contest not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add an entry to a contest",
        "description": "Creates a new entry in the contest. Currently no admin requirement.",
        "tags": ["Entries"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "slug": { "type": "string" },
                  "description": { "type": "string" },
                  "round": { "type": "string" },
                  "submittedBy": { "type": "string" }
                },
                "required": ["name", "slug", "description", "round", "submittedBy"]
              },
              "example": {
                "name": "Midnight Mojito",
                "slug": "midnight-mojito",
                "description": "A dark twist on the classic mojito",
                "round": "semifinals",
                "submittedBy": "Jane Smith"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Entry created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Entry" }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/contests/{id}/entries/{entryId}": {
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "description": "Contest ID",
          "schema": { "type": "string" }
        },
        {
          "name": "entryId",
          "in": "path",
          "required": true,
          "description": "Entry ID",
          "schema": { "type": "string" }
        }
      ],
      "get": {
        "summary": "Get an entry",
        "description": "Returns a single entry by ID. Currently no admin requirement.",
        "tags": ["Entries"],
        "responses": {
          "200": {
            "description": "Entry details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Entry" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Entry not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update an entry",
        "description": "Updates an existing entry. Currently no admin requirement.",
        "tags": ["Entries"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "slug": { "type": "string" },
                  "description": { "type": "string" },
                  "round": { "type": "string" },
                  "submittedBy": { "type": "string" }
                }
              },
              "example": {
                "round": "finals"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Entry updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Entry" }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Entry not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete an entry",
        "description": "Removes an entry from the contest. Currently no admin requirement.",
        "tags": ["Entries"],
        "responses": {
          "200": {
            "description": "Entry deleted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          },
          "403": {
            "description": "Admin access required",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Entry not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/contests/{id}/scores": {
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "description": "Contest ID or slug",
          "schema": { "type": "string" }
        }
      ],
      "get": {
        "summary": "Get scores",
        "description": "Returns scores for a contest. Optionally filter by entryId and/or judgeId.",
        "tags": ["Scores"],
        "parameters": [
          {
            "name": "entryId",
            "in": "query",
            "description": "Filter by entry ID",
            "required": false,
            "schema": { "type": "string" }
          },
          {
            "name": "judgeId",
            "in": "query",
            "description": "Filter by judge ID",
            "required": false,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of scores",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "scores": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ScoreEntry" }
                    }
                  }
                },
                "example": {
                  "scores": [
                    {
                      "id": "score-1",
                      "entryId": "entry-1",
                      "judgeId": "judge-1",
                      "breakdown": {
                        "aroma": 8,
                        "balance": 7,
                        "presentation": 9,
                        "creativity": 8,
                        "overall": 8
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Contest not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Submit or update a score",
        "description": "Submits a new score or updates an existing one. Can submit full breakdown or a single category score. Score categories are validated against the contest's config.attributes. Currently no admin requirement.",
        "tags": ["Scores"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "entryId": { "type": "string", "description": "Entry being scored" },
                  "judgeId": { "type": "string" },
                  "judgeName": { "type": "string", "description": "Name for auto-created judge" },
                  "judgeRole": { "$ref": "#/components/schemas/JudgeRole" },
                  "categoryId": { "type": "string", "description": "Single category to update (must match a config attribute ID)" },
                  "value": { "type": "number", "description": "Score value for single category" },
                  "breakdown": { "$ref": "#/components/schemas/ScoreBreakdown" },
                  "notes": { "type": "string" }
                },
                "required": ["judgeId"]
              },
              "examples": {
                "fullBreakdown": {
                  "summary": "Submit full score breakdown",
                  "value": {
                    "entryId": "entry-1",
                    "judgeId": "judge-1",
                    "breakdown": {
                      "aroma": 8,
                      "balance": 7,
                      "presentation": 9,
                      "creativity": 8,
                      "overall": 8
                    },
                    "notes": "Excellent presentation"
                  }
                },
                "singleCategory": {
                  "summary": "Submit single category score",
                  "value": {
                    "entryId": "entry-1",
                    "judgeId": "guest-123",
                    "judgeName": "Guest Voter",
                    "categoryId": "overall",
                    "value": 8
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Score updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ScoreEntry" }
              }
            }
          },
          "201": {
            "description": "Score created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ScoreEntry" }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" },
                "examples": {
                  "missingFields": {
                    "value": { "message": "entryId and judgeId are required." }
                  },
                  "invalidCategory": {
                    "value": { "message": "Invalid categoryId for scoring." }
                  },
                  "missingScore": {
                    "value": { "message": "Score breakdown or categoryId + value is required." }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Contest or entry not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/configs": {
      "get": {
        "summary": "List all configurations",
        "description": "Returns all contest configurations from the datastore.",
        "tags": ["ContestConfigs"],
        "responses": {
          "200": {
            "description": "List of configurations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/ContestConfigItem" }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a configuration",
        "description": "Creates a new contest configuration.",
        "tags": ["ContestConfigs"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": { "type": "string", "description": "Optional custom ID" },
                  "topic": { "type": "string" },
                  "entryLabel": { "type": "string" },
                  "entryLabelPlural": { "type": "string" },
                  "attributes": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/AttributeConfig" }
                  }
                },
                "required": ["topic", "attributes"]
              },
              "example": {
                "topic": "Beer Tasting",
                "entryLabel": "Beer",
                "entryLabelPlural": "Beers",
                "attributes": [
                  { "id": "appearance", "label": "Appearance", "min": 0, "max": 10 },
                  { "id": "aroma", "label": "Aroma", "min": 0, "max": 10 },
                  { "id": "taste", "label": "Taste", "min": 0, "max": 10 },
                  { "id": "overall", "label": "Overall", "min": 0, "max": 10 }
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Configuration created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ContestConfigItem" }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/configs/{configId}": {
      "parameters": [
        {
          "name": "configId",
          "in": "path",
          "required": true,
          "description": "Configuration ID",
          "schema": { "type": "string" }
        }
      ],
      "get": {
        "summary": "Get a configuration",
        "description": "Returns a single configuration by ID.",
        "tags": ["ContestConfigs"],
        "responses": {
          "200": {
            "description": "Configuration details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ContestConfigItem" }
              }
            }
          },
          "404": {
            "description": "Configuration not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update a configuration",
        "description": "Updates an existing configuration.",
        "tags": ["ContestConfigs"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "topic": { "type": "string" },
                  "entryLabel": { "type": "string" },
                  "entryLabelPlural": { "type": "string" },
                  "attributes": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/AttributeConfig" }
                  }
                }
              },
              "example": {
                "entryLabel": "Brew",
                "entryLabelPlural": "Brews"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configuration updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ContestConfigItem" }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Configuration not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a configuration",
        "description": "Removes a configuration from the datastore.",
        "tags": ["ContestConfigs"],
        "responses": {
          "200": {
            "description": "Configuration deleted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          },
          "404": {
            "description": "Configuration not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    { "name": "Contests", "description": "Manage contests of any type" },
    { "name": "Entries", "description": "Manage entries within contests (drinks, chilies, cosplays, etc.)" },
    { "name": "Scores", "description": "Submit and retrieve scores" },
    { "name": "ContestConfigs", "description": "Manage contest configuration templates and scoring attributes" }
  ]
}
